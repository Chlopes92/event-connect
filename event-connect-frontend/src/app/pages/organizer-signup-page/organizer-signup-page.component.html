<div class="auth-container">
    <!-- Toast Container (en haut à droite) -->
    <div class="toast-container">
      <div 
        *ngFor="let toast of toasts" 
        class="toast"
        [class.toast-success]="toast.type === 'success'"
        [class.toast-error]="toast.type === 'error'"
        [class.toast-warning]="toast.type === 'warning'">
        <div class="toast-content">
          <div class="toast-icon">
            @if(toast.type === 'success'){
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            }
            @if(toast.type === 'error'){
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            }
            @if(toast.type === 'warning'){
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 9V13M12 17H12.01M10.29 3.86L1.82 18A2 2 0 003.64 21H20.36A2 2 0 0022.18 18L13.71 3.86A2 2 0 0010.29 3.86Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            }
          </div>
          <span class="toast-message">{{ toast.message }}</span>
        </div>
        <button type="button" class="toast-close" (click)="removeToast(toast.id)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="auth-card">
      <!-- Left Side - Existing Organizer -->
      <div class="auth-side existing-organizer" [class.active]="!isNewOrganizer">
        <div class="image-overlay">
          <img src="assets/events/digital-immersion.png" alt="Event">
          <div class="overlay-gradient"></div>
        </div>
        <div class="content">
          <h2 class="title">Rejoignez nous !</h2>
          <p class="description">Créez des événements inoubliables avec notre plateforme</p>
          
          @if(!isNewOrganizer){
          <form [formGroup]="existingOrganizerForm" (ngSubmit)="onExistingOrganizerSubmit()">
            <div class="form-group">
              <input 
                type="email" 
                formControlName="email" 
                placeholder="Email"
                autocomplete="email"
                class="form-input">
              @if(existingOrganizerForm.get('email')?.invalid && existingOrganizerForm.get('email')?.touched){
              <div class="error">
                Email valide requis
              </div>
              }
            </div>
            <div class="form-group">
              <input 
                type="password" 
                formControlName="password"
                autocomplete="password" 
                placeholder="Mot de passe"
                class="form-input">
              @if(existingOrganizerForm.get('password')?.invalid && existingOrganizerForm.get('password')?.touched) {
              <div class="error">
                Mot de passe requis
              </div>
              }
            </div>
            <button type="submit" class="submit-btn" [disabled]="existingOrganizerForm.invalid || isLoading">
              {{ isLoading ? 'CONNEXION...' : 'SE CONNECTER' }}
            </button>
          </form>
          }

          @if(isNewOrganizer) {
          <button class="switch-btn" (click)="switchToExistingOrganizer()">
            CONNEXION
          </button>
          }
        </div>
      </div>

      <!-- Right Side - New Organizer -->
      <div class="auth-side new-organizer" [class.active]="isNewOrganizer">
        <div class="content">
          <h2 class="title color-font">Créer un compte organisateur</h2>
          @if(isNewOrganizer) {
          <form [formGroup]="newOrganizerForm" (ngSubmit)="onNewOrganizerSubmit()">
            <div class="form-group">
              <label>Nom *</label>
              <input 
                type="text" 
                formControlName="lastName"
                autocomplete="lastName" 
                class="form-input">
              @if(newOrganizerForm.get('lastName')?.invalid && newOrganizerForm.get('lastName')?.touched){
              <div class="error">
                Nom requis
              </div>
              }
            </div>

            <div class="form-group">
              <label>Prénom *</label>
              <input 
                type="text" 
                formControlName="firstName"
                autocomplete="firstName" 
                class="form-input">
              @if(newOrganizerForm.get('firstName')?.invalid && newOrganizerForm.get('firstName')?.touched) {
              <div class="error">
                Prénom requis
              </div>
              }
            </div>

            <div class="form-group">
              <label>Nom de l'organisation *</label>
              <input 
                type="text" 
                formControlName="organization" 
                autocomplete="organization"
                class="form-input">
              @if(newOrganizerForm.get('organization')?.invalid && newOrganizerForm.get('organization')?.touched) {
              <div class="error">
                Nom de l'organisation requis
              </div>
              }
            </div>

            <div class="form-group">
              <label>Téléphone *</label>
              <input 
                type="text" 
                formControlName="phone" 
                autocomplete="phone"
                placeholder="Ex: 0612345678"
                class="form-input">
              @if(newOrganizerForm.get('phone')?.invalid && newOrganizerForm.get('phone')?.touched) {
              <div class="error">
                @if(newOrganizerForm.get('phone')?.errors?.['required']) {
                  Téléphone requis
                }
                @if(newOrganizerForm.get('phone')?.errors?.['pattern']) {
                  Format invalide (Ex: 0612345678 ou +33612345678)
                }
              </div>
              }
            </div>

            <div class="form-group">
              <label>Email *</label>
              <input 
                type="email" 
                formControlName="email"
                autocomplete="email" 
                class="form-input">
              @if(newOrganizerForm.get('email')?.invalid && newOrganizerForm.get('email')?.touched) {
              <div class="error">
                @if(newOrganizerForm.get('email')?.errors?.['required']) {
                  Email requis
                }
                @if(newOrganizerForm.get('email')?.errors?.['email'] || newOrganizerForm.get('email')?.errors?.['pattern']) {
                  Email invalide
                }
              </div>
              }
            </div>

            <div class="form-group">
              <label>Mot de passe *</label>
              <input 
                type="password" 
                formControlName="password" 
                autocomplete="password"
                class="form-input">
              @if(newOrganizerForm.get('password')?.invalid && newOrganizerForm.get('password')?.touched) {
              <div class="error">
                @if(newOrganizerForm.get('password')?.errors?.['required']) {
                  Mot de passe requis
                }
                @if(newOrganizerForm.get('password')?.errors?.['minlength']) {
                  Minimum 8 caractères
                }
                @if(newOrganizerForm.get('password')?.errors?.['pattern']) {
                  Le mot de passe doit contenir : 1 majuscule, 1 minuscule, 1 chiffre et 1 caractère spécial (&#64;$!%*?&)
                }
              </div>
              }
            </div>

            <button type="submit" class="submit-btn" [disabled]="newOrganizerForm.invalid || isLoading">
              {{ isLoading ? 'CRÉATION...' : 'CRÉER UN COMPTE' }}
            </button>
          </form>
          }

          @if(!isNewOrganizer) {
          <p class="color-font"> Créer votre compte ! </p>

          <button class="switch-btn-create" (click)="switchToNewOrganizer()">
            CRÉER UN COMPTE
          </button>
        }

          @if(!isNewOrganizer) {
          <button class="switch-btn-mobile"(click)="switchToNewOrganizer()">
            CRÉER UN COMPTE
          </button>
          }
        </div>
      </div>
    </div>
</div>